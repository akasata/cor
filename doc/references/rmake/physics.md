# 物理シミュレーションについて

Rmakeには、2Dゲーム向けの簡易的な物理運動シミュレーションが搭載されています。

* 当たり判定
* 速度
* 重力
* 跳ね返り係数

## 当たり判定について

衝突時の処理については、[こちらのページ](collision.md)を参照してください。

### collision_sizeメソッド

スプライトの当たり判定の領域を指定します。

```ruby
# 当たり判定の大きさを(100, 100)にする
sprite.collision_size(100, 100)

# 当たり判定の大きさを(100, 100)にする
# 当たり判定の位置を(x, y)=(25, 25)ずらす
sprite.collision_size(100, 100, 25, 25)
```

* 引数：整数値
  * width（幅）
  * height（高さ）
  * offset_x（スプライトの原点と当たり判定の原点のズレを表すX座標の大きさ、省略した場合は0が代入されます）
  * offset_y（スプライトの原点と当たり判定の原点のズレを表すY座標の大きさ、省略した場合は0が代入されます）

### collision_circleメソッド

スプライトの当たり判定の領域を円形で指定します。

```ruby
# 当たり判定の大きさを(16)にする
sprite.collision_circle(16)

# 当たり判定の大きさを(8)にする
# 当たり判定の位置を(x, y)=(25, 25)ずらす
sprite.collision_circle(8, 25, 25)
```

* 引数：整数値
  * radius（半径）
  * offset_x（スプライトの原点と当たり判定の原点のズレを表すX座標の大きさ、省略した場合は0が代入されます）
  * offset_y（スプライトの原点と当たり判定の原点のズレを表すY座標の大きさ、省略した場合は0が代入されます）

## 速度について

スプライトに速度を与えます。

```ruby
# X, Y軸上に毎フレーム(4, 6)の速度を与える
sprite.velocity(4, 6)

# X軸のみ
sprite.velocity(4, nil)

# Y軸のみ
sprite.velocity(nil, 6)
```

## 重力について

スプライトに重力加速度を設定することができます。

```ruby
# X, Y軸上に毎フレーム(4, 6)の加速度を与える
sprite.gravity(4, 6)

# X軸のみ
sprite.gravity(4, nil)

# Y軸のみ
sprite.gravity(nil, 6)
```

## 跳ね返り係数について

スプライトに跳ね返り係数を与えることができます。

```ruby
# X, Y軸上に(0.9, 0.8)の跳ね返り係数を与える
sprite.bounce(0.9, 0.8)

# X軸のみ
sprite.bounce(0.9, nil)

# Y軸のみ
sprite.bounce(nil, 0.8)
```
## その他について

### collide_world!メソッド

このメソッドを呼ぶと、世界の端に到着するとそのスプライトはそれ以上進めなくなります。

```ruby
sprite.collide_world!
```

* 引数：なし

